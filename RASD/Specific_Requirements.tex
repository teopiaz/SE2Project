
\section{Specific Requirements}


\subsection{Functional Requirement}

With these requirements are defined features and functions with which
the user will interact directly.



\subsubsection{\goal{1}}
\begin{itemize}
	\reqcounter The system shall allow registration only if the patent license number is provided.
	\reqcounter The system shall provide a home page in which a guest user must be
	able to know what the service is. 
	\reqcounter The system shall demand the User to read and accept all term of use of the service.
	\reqcounter The system shall provide a form in which a Guest can insert his personal data for the registration to the service.
	\reqcounter The system shall provide a form in which a Guest can insert his payment information.
	
	
\end{itemize}

\subsubsection{\goal{2}}
\begin{itemize}
	\reqcounter The system shall show a sign-up page with a login form and a logout button if the User is already logged in.
	\reqcounter The system shall validate any input in both client and server side.
	\reqcounter The system shall prevent anyone from logging more than once at a time.
	\reqcounter The system shall show and error message in case of wrong credential.
	\reqcounter The system shall provide a password recovery procedure.
	\reqcounter The system shall prevent bruteforce attack limiting the number of try per IP address.
	\reqcounter The system shall redirect the User to the homepage as a guest after the logout.
\end{itemize}



\subsubsection{\goal{3}}
\begin{itemize}
	\reqcounter The system shall show a an account page with all the information that the User sent during 
	account registration.
	\reqcounter The system shall ask for the password before saving the edited details.
	\reqcounter The system shall send and email to notify the changes.
\end{itemize}



\subsubsection{\goal{4}}
\begin{itemize}
	\reqcounter The system shall show on a web page or a view in the application the position of the available car.
	\reqcounter The system shall allow the User to set a search radius.
	\reqcounter The system shall ask the User for the GPS position or to provide an address.
\end{itemize}


\subsubsection{\goal{5}}
\begin{itemize}
	\reqcounter The system shall not allow the User to request multiple cars at the same time.
	\reqcounter The system shall check if the payment information are valid and show an error if not.
	\reqcounter The system shall automatically cancel a car reservation and make the car available again if the User don't unlock the car in one hour and charge with a 1 euro fee.
	\reqcounter The system shall check for the User position and if the distance from the car is less than 50 meters
	allow to unlock the car.
\end{itemize}

\subsubsection{\goal{6}}
\begin{itemize}
	\reqcounter The system shall inform the User if she is driving outside the city area.
	\reqcounter In case of driving outside the city area the system shall charge a 100\%  more of the current charge.
\end{itemize}



\subsubsection{\goal{7}}

\begin{itemize}
	\reqcounter The system shall inform the User of the amount that will be charged.
	\reqcounter The system shall inform the User of the position of charging stations nearby the current car position.
	\reqcounter The system shall show on a map the special parking area and the safe area nerby the current car position.
\end{itemize}


\subsubsection{\goal{8}}
\begin{itemize}
	\reqcounter The system shall detect the number of passengers on the car
	\reqcounter The system shall apply a discount of 10\% on the last ride if it detects the presence of two other passengers on the car in addition to the driver.
	\reqcounter The system shall check the level of the battery when a car is left.
	\reqcounter The system shall apply a discount 	of 20\% on the last ride if it detects that the car was left with no more than 50\% of the battery empty.
	\reqcounter The system shall check if the user plugges the car into the power grid when he left the car in a special parking area.
	\reqcounter The system shall apply a discount 	of 20\% on the last ride if it detects that the user takes care of plugging the car into the power grid when he leaves the car in a special parking area. 
	\reqcounter The system shall calculate the distance from the parking position to the nearest power grid station and if that distance is more than 3 km, shall charge the 30\% on the last ride. 
		
\end{itemize}


\subsubsection{\goal{9}}
\begin{itemize}
	\reqcounter The system shall detect the car turning off and the closure of the doors and stop charging the driver after this two actions are accomplished
	
\end{itemize}


\subsubsection{\goal{10}}
\begin{itemize}
	\reqcounter The system shall detect that the car is plugged into the power grid and start charging the battery

\end{itemize}

\subsection{Non-Functional Requirement}



\begin{itemize}
	\item PowerEnJoy has to be available 24h/7d.
	\item Both mobile application and website must be reactive and usable.
	
\subsubsection{Reliability}%affidabilit√†

The service has to guarantee an 24h/7d availability. Components of the project code will be tested after the implementation phase to ensure that they are functional. 
All the critical software bugs found must be patched in at least 48h.
If a Backend API change must guarantee support for client that implement older API.
All the system data must be constantly backed up to assure the data recovery in case of fault.



\subsubsection{Usability}
\begin{itemize}
	\item The User must be able to use the system with mouse, keyboard and touchscreen.
	\item The User must be able to choose from several language.
	\item At the first login the system must provide a simple and skippable 3-views guided tutorial of the service.
\end{itemize}

\begin{figure}[h]
	\centering
\includegraphics[scale=0.4]{img/webhome}
	\caption{PowerEnJoy website homepage}
\end{figure}
\FloatBarrier

\begin{figure}[h]
	\centering
	\includegraphics[scale=0.4]{img/appmap}
	\caption{PowerEnJoy Mobile Application map view}
\end{figure}
\FloatBarrier

\subsubsection{Security}

The system must ensure that all data is protected from unauthorized
access. Password should be saved on a DB hashed and salted.
Every input from the user and every request must be sanitized 
\iffalse
It must support communication protocols used by web applications and
devices on or within the network edge. These include network transport
protocols such as HTTP and SSL/TLS, plus proxy support.
\fi
\end{itemize}


\pagebreak
\input{UseCase}

\subsection{Activity Diagram}
\subsubsection{PowerEnJoy Trip}
\begin{figure}[h]
	\centering
	\includegraphics[width=345px]{img/activity_trip}
	\caption{PowerEnJoy normal flow}
\end{figure}
\FloatBarrier

\pagebreak
\subsection{Class Diagram}
\subsubsection{PowerEnJoy server}
\begin{figure}[h]
	\centering
	\includegraphics[width=380px]{img/classdiagram_server}
	\caption{PowerEnJoy Server Class Diagram}
\end{figure}
\FloatBarrier
